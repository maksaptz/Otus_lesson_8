# Systemd - создание unit-файла

## Цель домашнего задания:
Научиться редактировать существующие и создавать новые unit-файлы.

В работе использовался vagrant box: "centos/stream8" version "20210210.0"

Описание домашнего задания:

1) Написать service, который будет раз в 30 секунд мониторить лог на предмет наличия ключевого слова (файл лога и ключевое слово должны задаваться в /etc/sysconfig);
2) Установить spawn-fcgi и переписать init-скрипт на unit-файл (имя service должно называться так же: spawn-fcgi);
3) Дополнить unit-файл httpd возможностью запустить несколько инстансов сервера с разными конфигурационными файлами.

### Написать service, который будет раз в 30 секунд мониторить лог на предмет наличия ключевого слова "ALERT"
  Для начала нам требуется отредактировать конфиг /etc/sysconfig где мы укажем ключевое слово и путь к логу. Затем напишем скрипт который будет непосредственно искать ключевое слово. После этого создаем тестовый лог для проверки работы скрипта. Остается создать непосредсвенно сам юнит systemd, и юнит timer который будет выводить запись в лог каждые 30 секунд.

### Установить spawn-fcgi и переписать init-скрипт на unit-файл (имя service должно называться так же: spawn-fcgi)
  Скачиваем необходимые пакеты. Изменяем настройки в /etc/sysconfig/spawn-fcgi. И на основе init скрипта формируем unit systemd.

### Дополнить unit-файл httpd возможностью запустить несколько инстансов сервера с разными конфигурационными файлами
  Скачиваем необходимы пакеты. Делаем правки в unit systemd. Редактируем конфиг /etc/sysconfig, добавляем туда пути к конфигам httpd. Создаем в /etc/httpd/conf 2 конфига для запуска разных конфигураций.

#### Проверка домашнего задания
  Для проверки дз необходимо запустить Vagrantfile и ввести следующие команды:
1) sudo tail -f /var/log/messages # в журнале мы должны видеть циклично появляющуюся надпись "Look!!!";
2) sudo systemctl status spawn-fcgi.service # мы видим что служба активна;
3) sudo ss -tnulp | grep httpd # видно что apache использует 2 порта 80 и 8080 для разных конфигов.

##### sh скрипты содержат комментарии с описанием выполняемых команд!

